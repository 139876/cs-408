交换机

帧：数据链路层的协议**数据单元**，封装网络层数据报。

链路（link）：网络中两个结点之间的物理通道。传输介质有双绞线、光纤、微波。分为有线链路、无线链路。

数据链路：网络中两个结点之间的逻辑通道。把实现控制数据传输的协议的硬件、软件加到链路上构成数据链路。而现在最常用的方法是使用**网络适配器**（既有硬件也有软件）来实现协议。就是：**网卡作用：物理link-->逻辑link**

链路层不用做到可靠传输，因为还有IP层，所以链路层的帧，不需要纠错、序号、流量控制

## 功能

### 为网络层提供服务

| 类型                 | 含义                                                         | 例子                         |
| -------------------- | ------------------------------------------------------------ | ---------------------------- |
| 无确认无连接服务     | 源主机在发送数据时不用与目的主机建立连接。目的主机收到也不需要返回确认。帧丢失了数据链路层也不需重发，直接交给上一层处理。 | 误码率低的通信信道，实时通信 |
| 有确认无连接服务     | 源主机在发送数据时不用与目的主机建立连接。目的主机收到**需要**返回确认，若源主机在规定时间内没有收到确认信号，则把没有收到确认的帧重新发送。 | 误码率高的通信信道，无线通信 |
| 有确认面向连接的服务 | 源主机在发送数据时**需要**与目的主机建立连接。目的主机收到**需要**返回确认。 |                              |

### 链路管理

连接的建立、维持、释放（用于面向连接服务）

| 链路       | 介绍                                           | 应用                               | 典型拓扑结构               |
| ---------- | ---------------------------------------------- | ---------------------------------- | -------------------------- |
| 点对点链路 | 两个相邻的节点通过一个链路进行相连，没有第三者 | PPP协议、广域网                    |                            |
| 广播式链路 | 所有主机共享通信介质                           | 早期总线以太网、无线局域网，对讲机 | 总线型、星型（逻辑总线型） |

#### 介质访问控制

使得广播式的两个节点之间的通信不会受到其他的干扰

- 静态划分信道（信道划分介质访问控制）
  - 频分多路复用FDM
  - 时分多路复用TDM
    - 统计时分复用STDM
  - 波分多路复用WDM
  - 码分多路复用CDM
    - **码分多址CDMA**
- 动态划分信道
  所有的用户都可以发送信息，发送信息时占用全部带宽



##### 轮询访问介质访问控制

令牌传递协议

令牌：一种特殊格式的MAC控制帧，不包含任何信息。控制信道使用，确保同一时刻只有一个结点独占信道。

![](D:\study\计算机网络\image\2令牌传输.png)

问题：

1. 令牌开销：令牌没有了就再产生一个。

2. 等待延迟：C想要发送数据，就需要等待AB都结束到自己才可以发送数据。
3. 单点故障：其中一台主机宕机了，那么这条路就断了，需要用替代机解决。

使用令牌环网无碰撞（物理星型拓扑，逻辑环形拓扑）

每一个结点都可以在一定的时间内获得发送数据报的权力，并不是无限制的持有令牌。

该方式常用于**负载较重**、**通信量较大**的网络中。



  - **随机访问介质访问控制**（只有它会发生冲突）

##### ALOHA协议

纯ALOHA协议：不监听信道，不按时间槽发送，随机发送（**想发就发**）。
不冲突的概率 = p(1-p)^2(N-1) = 1/2e
![](D:\study\计算机网络\image\2ALOHA协议.png)
时隙ALOHA协议：把时间分成若干个相同的时间片，所以有的用户在时间片开始时刻同步接入网络信道，若发生冲突，**须等到下一个时间片开始时刻再发送**。
不冲突的概率 = p(1-p)^(N-1) = 1/e
![](D:\study\计算机网络\image\2ALOHA协议时隙.png)
      
纯ALOHA比时隙ALOHA吞吐量更低，效率更低。



##### CSMA协议

载波监听多路访问协议：在发送帧之前，监听信道。信道空闲就发送完整的帧；信道忙就推迟发送。
1. 1-坚持CSMA：空闲信道直接传输，**忙就等到空闲再传输**。
优点：只要媒体空闲，站点马上发送，避免媒体利用率的浪费。
缺点：假如两个或以上站点有数据要发送，冲突就不可避免。
2. 非坚持CSMA：空闲信道直接传输，**忙就等待一个随机时间之后再进行监听**。
优点：采用随机的重发时延时间可以减少冲突的发生。
缺点：可能大家都在延迟等待，使得媒体处于空闲状态，利用率低。
3. p-坚持CSMA：空闲信道以p概率直接传输，1-p概率等待到下一个时间槽再传输，**忙就等到空闲再p概率**。
优点：可以像非坚持那样减少冲突，可以像1-坚持那样减少空间浪费。



##### CSMA/CD协议（重点）

CD：碰撞检测（冲突检测，只能检测不能避免）：边发送边监听（半双工）总线式以太网

![](D:\study\计算机网络\image\2CSMA CD.png)

2τ（2涛）时间是一个来回（传输时延、争用期）

确定碰撞后的重传时机：**截断二进制指数规避算法**

1. 确定基本退避（推迟）时间为争用期2τ。
2. 确定参数k，但k不超过10，即k=min[重传次数，10]。当重传次数<10时，k=重传次数；当大于10时，k=10。
3. 从离散的整数集合[0, 1, ..., 2^k-1]随机取出一个数r。重传所需的退避时间就是r倍的基本退避时间，即**2τ*r**。
4. 当重传达**16次**仍然不成功，说明网络太拥挤，认为此帧永远无法正确发出，抛弃此帧并向高层报告出错。

最小帧长度：帧的传输时延至少2倍于τ（信号在总线中的传播时延）。
$$
帧的传输时延=\frac {帧长(bit)}{数据传输速率} \ge 2τ
$$

$$
最小帧长=2τ*数据传输速率
$$

以太网规定，最短帧长为**64B**，凡是小于64B的帧都是由于冲突而异常终止的无效帧。



##### CSMA/CA协议

CA：碰撞避免（只能避免不能检测）：适用于无线局域网

在发送数据之前，先检测信道是否空闲，切实发送之前还会再等一会，防止碰撞

- 空闲就发送**RTS**
  - 接收方收到RTS之后回复**CTS**
  - 发送方收到CTS之后，开始发送数据帧，同时**预约信道**（告知其他站点自己要发送多久数据）
  - 接收端收到数据帧之后，用CRC来检验数据是否正确，正确就回复**ACK**
  - 发送方收到ACK就进行下一个数据帧的发送/没有收到就使用**二进制退避算法**一直重传

|                                      | CSMA/CD                                                      | CSMA/CA                                                      |
| ------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 相同                                 | 1. 都属于CSMA思路，核心是先监听信道，再发送数据              | 2. 冲突之后都会进行重传                                      |
| 传输介质不同                         | 总线式以太网（有线）                                         | 无线局域网（无线）                                           |
| 载波检测方式不同（传输介质不同导致） | 通过电缆电压变化检测。数据发生碰撞时，电缆中的电压会随之发生变化。 | 结合能量检测（ED）、载波检测（CS）、能量载波混合检测三种检测信道是否空闲。 |
|                                      | 检测冲突                                                     | 避免冲突                                                     |





### 流量控制

限制发送方（数据链路层和**传输层**都有）

| 层         | 类型   | 控制手段                                     |
| ---------- | ------ | -------------------------------------------- |
| 数据链路层 | 点到点 | 接收端收不下就不回复                         |
| 传输层     | 端到端 | 接收端给发送端发送窗口公告（缓冲区还有多大） |

较高的发送速度、较低的接受能力不匹配，会造成传输出错。发送方发来的数据超出了接收方的缓冲空间，就接收不到了。

流量控制的方法：

#### 停止-等待协议

解决底层信道出现的**丢包**问题，实现流量控制。这里讨论可靠通信原理，所以不考虑在哪一个层次上传输。

算是一种**窗口都是1**的特殊的滑动窗口协议。传输效率很低。

因为**超时计时器**（重传时间比平均时延长）的存在，所以要满足下面

- 发送完一个帧之后，保留它的副本，以便下一次发送。
- 数据帧、确认帧必须编号。

该协议使用在全双工通信方式，但是为了方便讨论，使用半双工（一来一回）：

- 无差错：每发送完一个帧之后停止发送，启动超时计时器并等待对方的确认帧，收到确认后再发送下一个帧。
- 数据帧丢失（**超时重传**）：当接收方有一个帧没有收到，计时器结束后，再次重复发送一次。

![](D:\study\计算机网络\image\2停止等待.bmp)

- ACK丢失![](D:\study\计算机网络\image\2停止等待1.bmp)

- ACK迟到![](D:\study\计算机网络\image\2停止等待2.bmp)

加上时延

![](D:\study\计算机网络\image\2停止等待3.bmp)

T_D：数据帧的发送时延（比特数越长时延就越长）T_D=帧长度/数据传输速率C

T_A：确认帧的发送时延

RTT：往返时延

**信道利用率=(L/C)/T**

**信道吞吐率=信道利用率*C**

T：发送总周期

L：T时间内发送的数据L

C：发送方数据传输速率

![](D:\study\计算机网络\image\2停止等待 例.bmp)

没有说T_A，所以不用加上。2*30ms是RTT

#### 滑动窗口协议

解决**流量控制**和**可靠传输**两个问题

发送窗口：发送维持一组连续的允许发送的特定的帧序号

接收窗口：接受维持一组连续的允许接收的帧序号

采用**n个比特**对帧编号，那么发送**窗口的尺寸W**应该满足：
$$
1 \le W \le 2^n-1
$$

##### 后退N帧协议(GBN)

重点：

- 积累确认
- 接收方只接收顺序帧，无序直接丢弃
- 确认序号最是大的、按序到达的帧
- 发送窗口大小

发送窗口大小>1，接受窗口大小=1

同时将发送窗口的帧全部发送，接收方挨个接收，接收一个后返回ACK，再滑动到下一个窗口。

![](D:\study\计算机网络\image\2后退n帧.png)

GBN发送方必须响应的三件事：

1. 上层的调用
   网络层要发送数据时，发送方先检查发送窗口是否满了，未满就发送，满了发送方就会把需要发送的数据返回给上层，暗示窗口已经满了。发送方缓存这些数据，等窗口不满时在发送。

2. 收到一个ACK
   GBN协议之中，对n号帧使用**累计确认**的方式，表明接收方已经接收到了n号帧和他它前的所有帧 。所以，接收方不用对每一个帧都返回ACK，隔一会发送一个ACK就可以。
   
3. 超时事件
   根据2，如果出现帧丢失或者超时，发送方会发送所有未被确认收到的帧。

接收方要做的事

1. 按序收到n号帧后，需要发送一个ACK给发送方，并且将帧的数据交付给上层。
2. 其余情况（比如无序）都**丢弃帧**，并为最近接受的帧重新发送ACK。接收方无需缓存任何失序帧，只需要维护一个信息expected seq num（下一个按序接收的帧序号）

缺点：一个帧出错，后面没有出错的帧也要重传，批量重传

##### 选择重传协议(SR)

解决批量重传，设置单个确认，加大接受窗口，设置接收缓存，缓存乱序到达的帧。

发送窗口大小>1，接受窗口大小>1。发送窗口最好=接收窗口
$$
1 \le W \le 2^{n-1}
$$
![](D:\study\计算机网络\image\2选择重传.png)

SR发送方必须响应的三件事：

1. 上层的调用
   网络层要发送数据时，发送方先检查发送窗口是否满了，未满就发送，满了发送方就会把需要发送的数据返回给上层，暗示窗口已经满了。发送方缓存这些数据，等窗口不满时在发送。

2. 收到一个ACK
   如果收到一个ACK，加入该序号在窗口之内，发送方就会将那个确认的标记为已接受。

   如果ACK帧是窗口的下界（最左边的窗口对应的），窗口确认并且向前移动序号到未确认的帧处。移动到未发送的帧则发送。

3. 超时事件

   每一个帧都有自己的计时器，一个超时事件发生之后只重传一个帧。

接收方要做的事

1. 收到帧后（无论是否按照顺序），需要发送一个ACK给发送方。失序帧缓存，直到所有的帧皆被收到为止，这时将一批帧按序交付给上层，然后向前滑动窗口。
2. 收到窗口前面的帧，也会返回一个ACK。因为发送方之所以会重新发送，是因为上一个ACK没有收到，所以再发送一个便是。
3. 其余情丢弃帧

### 封装成帧

封装成帧就是在一段数据的前后部分添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束。

首部和尾部包含许多的控制信息，他们的一个重要作用：**帧定界**(确定帧的界限)。

**帧同步**：接收方应当能从接收到的二进制比特流中区分出帧的起始和终止。

**组帧**的四种方法: 1.字符计数法，2.字符(节)填充法，3.零比特填充法，4.违规编码法。

MTU（最大数据单元）：帧的数据部分长度上限。

![](D:\study\计算机网络\image\2封装成帧.png)

**透明传输**（不管内容，直接传）

为了防止错误的找到帧的边界，不管所传数据是什么样的比特组合，都应当能够在链路上传送。因此，链路层就”看不见“有什么妨碍数据传输的东西。当所传数据中的比特组合恰巧与某一个**控制信息**完全一样时， 就必须采取适当的措施，使收方不会将这样的数据误认为是某种控制信息。这样才能保证数据链路层的传输是透明的。

#### 字符计数法

帧首部使用一个计数字段（第一个字节，8位）来标明帧内字符数。

这种方法缺点过于明显，一步错步步错，所以不常用。

![img](D:\study\计算机网络\image\2字符计数法.png)

#### 字符填充法

使用SOH、EOT（控制字符名称）作为帧的开头、结束。

1. 当传送的帧都是由文本文件组成时（由键盘输入，都是ascii码），无论输入什么字符都可以实现**透明传输**）

![img](D:\study\计算机网络\image\2字符填充法.png)

2. 当传送的帧是由非ascii码的文本文件组成时（二进制代码的程序或者图像），就需要用字符填充方法（在发送端填充**转义字符**ESC（0x7D），在接收端去掉）实现透明传输。字符填充法流程：

![img](D:\study\计算机网络\image\2字符填充法2.png)

实际：

1. 出现0x7**E**时，转换成2字节序列0x7D, 0x5**E**
2. 出现0x7**D**（ESC）时，转换成2字节序列0x7D, 0x5**D**

#### 零比特填充法

首部和尾部的标识符一样，当传输内容中出现和标识符一样的内容时，操作：

![img](D:\study\计算机网络\image\2零比特.png)

#### 违规编码法

用编码中不会用到的编码方式作为开始结束。以曼彻斯特编码为例：

![img](D:\study\计算机网络\image\2违规编码法.png)

由于字节计数法中Count字段的脆弱性（其值若有差错将导致灾难性后果）及字符填充实现上的复杂性和不兼容性，目前较普遍使用的帧同步法是**比特填充法**和**违规编码法**。



### 差错检测

简单来说，传输中的差错是由噪声引起的。

- 随机噪声：线路本身的电气特性造成，信道固有的。所以我们提高**信噪比**来避免干扰。
- 冲击噪声：外界特定的短暂的原因造成，也是产生差错的**主要原因**。

差错分类

- 位错：比特位出错，1变成0，0变成1.
- 帧错[#1]-[#2]-[#3]（下面3种都是出现**传输差错**，但不是**比特差错**）
  - 丢失：数据中某一帧丢掉了[#1]-[#3]
  - 重复：某一帧重发发送了一次[#1]-[#2]-[#2]-[#3]
  - 失序：接收端收到的顺序变了[#1]-[#3]-[#2]

误码率BER（Bit Error Rate）：传输错误的的比特占传输比特总数的比率。



比特错差错控制

- 检错编码：只是发现有错误。
  - 奇偶校验码
  - **循环冗余码CRC**
- 纠错编码 海明码：不仅能发现错误，还能知道是哪一个地方发生错误。



在数据传输中检测差错的3种技术:

#### 奇偶校验

前面加校验元1/0

要发送的信息 D 有 d 个比特。

在偶校验方案中，发送方只需包含一个附加的比特，选择附加比特的值，使得这 d+1 个比特(初始信息加上一个校验比特)中 **1 的总数是偶数**。

接收方的操作也很简单。接收方只需要数一数接收的 d+1 比特中 1 的个数。

如果发现了奇数个值为 1 的比特，接收方知道了至少出现了一个比特差错。更确切的说法是，出现了奇数个差错比特。但是如果出现了偶数个比特差错，显然这种方法无法检测这种错误。

二维单比特奇偶校验方案中，D 中的 d 个比特被划分为 i 行 j 列。对每行和每列计算奇 偶值。产生的 i+j+1 奇偶比特构成了链路层帧的差错检测比特。这种方法可以检测和纠正 1 比特的错误。



#### 校验和

在 TCP 和 UDP 协议中，对所有字段(包括首部和数据字段)都计算校验和。

IP 协议只对头部计算校验和。



#### **循环冗余检测**CRC

在数据发送之前，按照某种关系附加上一定的冗余码，构成一个符合某一个规则的码字之后再发送。当发送的数据发生变化时，冗余码也发生变化，使其不再遵守规则。接收端通过检验是否符合规则判断是否出错。

CRC 编码也称为多项式编码，因为该编码将要发送的比特串看作是系数为 0 和 1 的一个 多项式，对比特串的操作被解释为多项式运算。

发送端：

| 要传的数据 |      | 生成多项式 |              | 冗余码/帧检验序列FCS |
| --------- | ---- | -------- | ----------- | ----------------- |
| 5         | %    | 2        |    = 2 ...... | 1           |

5%2=2...1

最终发送的数据是，**要发送的数据**+**真检测序列FCS**。这里就是5+1=6

接收端： 

6%2=3...0（余数是0，判定无错，就接受）

**计算冗余码FCS步骤**：

1. 在要传的数据后加0。
2. 模2除法。
3. 最终发送的数据：要发送的数据+FCS。

![](D:\study\计算机网络\image\2CRC.jpg)

如果余数为0，判定这个帧没有差错。（接受）

如果余数不为0，判定这个帧有差错。（丢弃）

FCS的生成以及接收端CRC检验都是由硬件实现的，处理很迅速，不会产生延迟数据。



**只使用CRC**：凡是接收端数据链路层接受的帧均无差错。能够实现无比特差错的传输，但不是可靠传输（因为错误的帧丢弃了，接收端并没有收到）。

**可靠传输**：数据链路层发什么，接收端就接收什么。



#### 海明码

可以发现**双**比特错，但是只能纠正**单**比特错。

工作原理：动一发而牵全身

工作流程：

1. 确认校验码位数R
2. 确定校验码和数据的位置
3. 求出校验码的值
4. 检错并纠错



海明不等式：
$$
2^r \ge k+r+1
$$
r：冗余信息位（校验码位数）

k：信息位（原始数据的位数）

> 例子：数据D=101101
> ∴ 数据位数k=6
> ∵ 海明不等式
> ∴ 满足不等式的最小r=4
> ∴ D的海明码应该有6+4=10位
> 其中原数据6位，效验码4位

校验码是插入原数据之中的，而且，只能放在**2的几次方的位置**

设4位效验码依次是p1, p2, p3, p4，则它们放在

| 位数   | 1        | 2      | 3        | 4      | 5        | 6    | 7        | 8      | 9        | 10   |
| ------ | -------- | ------ | -------- | ------ | -------- | ---- | -------- | ------ | -------- | ---- |
| 二进制 | 000**1** | 0010   | 001**1** | 0100   | 010**1** | 0110 | 011**1** | 1000   | 100**1** | 1010 |
| 代码   | **p1**   | **p1** | d1       | **p3** | d2       | d3   | d4       | **p4** | d5       | d6   |
| 实际值 | 0        | 0      | 1        | 0      | 0        | 1    | 1        | 1      | 0        | 1    |

一个校验码可以校验多位数据：

p1的二进制位1在末尾，所以它可以效验1在末尾的数据。
求p1。令所有要校验的位异或为0：**p1⊕d1⊕d2⊕d4⊕d5=0**
将代码对应的实际值代入，得到p1=0

同理，p2的1在第二位，p2⊕d1⊕d3⊕d4⊕d6=0，p2=0

p3=0，p4=1

所以，D=101101的海明码就是0010011101

当接收方收到时候，就会重复上述异或过程，就会检查出那个比特出错了。，



## 个人区域网PAN

## 城域网MAN

## 局域网LAN

local area network（LAN）也就是内网

定义：指在某一区域之内的多台计算机互联成的计算机组，使用**广播信道**。

特点：

1. 覆盖地理范围小，只在一个相对独立的局部范围内互联。（物理层、链路层）
2. 使用专门铺设的传输介质（双绞线、同轴电缆）进行联网，网络传输速率高（10Mb/s~10Gb/s）。
3. 通信延迟时间短，误码率低（时间短传输过程衰减的就少），可靠性高。（强调**数据传输**）
4. 各站点是平等关系，共享传输信道。（**多点接入**）
5. 多采用分布式控制、广播式通信，能进行广播和组播。

决定要素：

**网络拓扑**

![](D:\study\计算机网络\image\2局域网拓扑.png)**传输介质**

有线局域网：双绞线、同轴电缆、光纤

无线局域网：电磁波

**介质访问控制方法**

- CSMA/CD：常用于总线型网络，也用于树型网络
- 令牌总线：常用于总线型网络，也用于树型网络
	把总线或树型的工作站按照一定的顺序（如接口地址）排列成一个逻辑环，只有持有令牌的才能控制总线，才能发送信息。
- 令牌环：用于环形局域网，如令牌环网



分类：

- 以太网：最广泛的局域网。符合IEEE802.3系列标准规范或DIX Ethernet V2标准。逻辑拓扑总线型，物理拓扑是星型或拓展星型。使用CSMA/CD。
- 令牌环网：逻辑拓扑是环型，物理拓扑是星型。采用IEEE802.5
- FDDI网：逻辑上是环形拓扑结构，物理上是双环拓扑。使用光纤。IEEE802.8。
- ATM网：较新型的单元交换技术，使用53B（字节）固定长度单元进行交换。
- 无线局域网（wlan）：采用IEEE802.11标准。



IEEE802标准

IEEE 802 LAN/MAN 标准委员会（1980.2月成立）定义了局域网标准。

IEEE802标准描述的数据链路层分为

1. 逻辑链路控制子层（LLC）：服务网络层
2. 介质访问控制子层（MAC）：服务物理层



### 以太网

只能实现无差错接受，不实现可靠传输

无连接：发送方、接收方之间没有”握手过程“

不可靠：

- 不对发送方的帧进行编号
- 接收方不向发送方发送ACK确认
- 差错帧直接丢弃，差错纠错由高层（传输层）负责



**10BASE-T以太网**

base：基带信号传输

T：双绞线。采用无屏蔽双绞线（UTP），每段双绞线最长100m（集线器到PC）

10：传输速率是10Mb/s

物理上：星型拓扑

逻辑上：总线型拓扑

编码：曼彻斯特编码

介质访问控制：CSMA/CD



适配器&MAC地址

通信适配器、网络适配器NIC

MAC地址：48位（bit）二进制地址。前24bit代表厂家（IEEE规定），后24bit厂家自己制定。常用6个16进制表示：02-60-8c-e4-b1-21

![](D:\study\计算机网络\image\2mac.png)

查询MAC地址的网站：https://regauth.standards.ieee.org/standards-ra-web/pub/view.html



### 无线局域网

![](D:\study\计算机网络\image\2无线局域网mac头部.png)

分类：

- 有固定基础设施无线局域网

![](D:\study\计算机网络\image\2无线局域网ESS.png)

wifi的名字就是服务集标识符

- 无固定基础设施无线局域网的自组织网络



## 广域网WAN

几千公里国际的大网络，如因特网。

通信子网主要使用**分组交换**技术，强调**资源共享**的目的。

范围大。负责层次：物理层、链路层、网络层

点对点的传输

同距离之下，广域网的速率快。但是因为距离远，所以一般来说，局域网速率快。



### PPP协议

只支持全双工链路。面向字节

是目前使用最广泛的协议数据据链路层协议，拨号上网一般都是PPP。

#### 满足要求

1. 简单
    对于链路层的帧。不需要纠错、序号、流量控制。
2. 封装成帧
    在帧头和帧尾加上帧定界符。
3. 透明传输
    不管数据部分有什么样的数据，就算有帧定界符，也完整的传输。
    - 异步线路（传输中是逐个字节、字符进行传输的）：使用字节填充
    - 同步线路（一位一位的比特发送）：使用比特填充
4. 多种网络层协议
封装数据报可以采用多种协议，IP协议、IPX协议都可以。
5. 多种类型链路
	- 串行（一次只发送一个bit），并行（一次发送多个bit）
	- 同步，异步
	- 电，光
	- 交换（动态），非交换（静态）
6. 差错检测
CRC循环冗余检测，错误就丢弃。
7. 检测连接状态
检测链路是否正常工作。
8. **最大传送单元**
数据部分最大长度**MTU**，默认不超过1500字节（B）。如果高层协议发送的分组过长超过MTU，PPP就丢弃这个帧，并返回差错。MTU是数据链路层的帧可以载荷的数据部分的最大长度，不是帧的总长度。
9. 网路层地址协商
知道通信双方的网络层地址，通过协议知道双方的IP地址。
10. 数据压缩协商
在发送数据的时候对数据进行压缩。

#### 无需满足的要求

1. 纠错。只需要检错。
2. 流量控制。交给上层控制。
3. 编序号。
4. 不支持多点线路，只支持点对点链路通信。

#### 三个组成（功能）

1. 一个IP数据报封装到串行链路（同步串行/异步串行）的方法。
2. 链路控制协议**LCP**：建议并维护数据链路连接。实现身份验证。
3. 网络控制协议**NCP**：PPP协议支持多种网络层协议，每个不同的网络层协议都要一个相对应的NCP来配置，为网络层协议建立和配置逻辑连接。（现有LCP建立连接才有NCP实现上网的功能）

![](.\image\2ppp状态.jpg)

帧格式

当数据部分出现帧定界符、转义字符就在前面再加上转义字符。

![](.\image\2ppp帧.png)


### HDLC协议

只支持全双工链路，面向比特

高级数据链路控制协议，不属于TCP协议族，是由ISO根据IBM公司的SDLC协议扩展开而发展的。但是实际上使用并不是很多。

可以实现透明传输，使用0比特插入法



## 设备

